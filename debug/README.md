# デバッグ

狭義は「プログラムのバグを取り除き、修正する行為」。広義には「コードの動きを確認する行為、テスト全般、あるいはその周辺作業」

### 主な実装のフロー

 1. 仕様の把握。
 2. 実装範囲のみを切り出し、コマンドライン(あるいはそれに相当する作業)で動きを確認。
 3. 十分な検証ができた段階で画面でのテストを行う。

### 気をつけたいポイント

- 実装→確認→修正の一連の工数をどうしたら減らせるかを考える。
- 画面で確認行為は工数がかかったり、処理によってはできないことが多いため、メソッド単位での確認作業が費用対効果が高い。
- そのためにプログラムをある程度細かく分割することが大切(ざっくり役割ごとにクラス分割し、メソッドを短くまとめる)。
- 短くまとめればその部分のみの確認作業をすることができ、時間的、精神的なコストの削減に繋がる。
- 処理の中核部分には環境に依存する変数(リクエストパラメーター、セッション、外部アプリ連携など)をなるべく入れない。
- 原理主義に陥らないことが大切(手段の目的化におちいらない。最適な手法は手法のメリットのみを汲み取り、アレンジする)
- テストデータ作成は面倒くさくても費用対効果は大きい。

### テストデータ作成

- データ作成部分をうまくプログラム化しておくことが重要(データ作成部分をまとめておき、環境に依存する変数をなるべくいれない。)
- Seeding,個人情報作成サービス、データ作成モジュール、自作のスクリプトなどはメリットデメリットをよく理解すること
- 更新系の処理は、前提データの用意→意図した処理の実装→検証→初期化(削除が最適)という流れをスムーズに行えるようにする。(データの削除と初期化が必要。)


### 障害対応・運用編
- ログの抽出(データのkeyとなる情報をわかりやすく残しているか。SQLや各種イベント)
- ログ転送 ex 保存:S3,各種ストレージサービス
- 異常状態の検知 アラート、監視ソフト、エラーレポート ex シェルスクリプトでの負荷チェック、SNS,Slack転送、Zabbix、Sentry
